- content_for :head do
  = javascript_include_tag "pages/teacher/homeworks/show-bundle"
  = stylesheet_link_tag "pages/teacher/homeworks/show-bundle", :media => "all"
  :javascript

#content-background
  #paper-top
  #paper
    - @homework.questions_in_order.each do |q|
      .content-div{data: {"question-id" => q.id.to_s, "question-type" => q.type}}
        .question-content-div
          .question-content
            = render :partial => "partials/question_content", locals: { content: q.content }
          - if q.figures.present?
            .question-figures
              = render :partial => "partials/question_figures", locals: { figures: q.q_figures }
          - if q.type == "choice"
            .question-items{data: {"question-answer" => q.answer}}
              - q.items.each_with_index do |item, index|
                %p.item-is-not-answer{id: "#{q.id.to_s}-item-#{index}"}
                  %label= d2c(index) + ". "
                  %span.item-content= item.render_question.html_safe
          - if q.answer_content.present?
            %strong.answer-label 解答
            .question-answer
              = render :partial => "partials/question_content", locals: { content: q.answer_content }
          - else
            %strong.answer-label.hide 解答
            .question-answer.hide
              = render :partial => "partials/question_content", locals: { content: q.answer_content }
        .question-operation-div.hide
          .btn-group.right{data: { qid: q.id.to_s }}
            = link_to "替换", "javascript:void(0)", :method => "get", :class => 'btn btn-default replace-btn', data: {qid: q.id.to_s}
            = link_to "插入", "javascript:void(0)", :method => "get", :class => 'btn btn-default insert-btn', data: {qid: q.id.to_s}
            = link_to "删除", { controller: "teacher/questions", action: "destroy", id: q.id.to_s }, :method => "delete", :class => 'btn btn-default'
  #paper-bottom

#replaceModal.modal.fade
  .modal-dialog
    .modal-content
      = form_tag("", method: "post", multipart: true) do
        .modal-header
          %button.close{type: "button", "data-dismiss" => "modal", "aria-hidden" => "true"} &times;
          %h3 替换题目
        .modal-body
          %p
            %span 1、请
            = link_to "点击这里", "javascript:void(0)", :class => 'question-download-url', :method => "get"
            %span 下载本题目
          %p
            %span 2、上传修改后的题目
            = file_field_tag "file"
        .modal-footer
          %a.btn.btn-default{href: "#", data: {dismiss: "modal"}, "aria-hidden" => "true"} 取消
          = submit_tag "完成", :class => 'btn-primary btn'

#insertModal.modal.fade
  .modal-dialog
    .modal-content
      = form_tag("", method: "post", multipart: true) do
        .modal-header
          %button.close{type: "button", "data-dismiss" => "modal", "aria-hidden" => "true"} &times;
          %h3 插入题目
        .modal-body
          %p
            %span 新题目将出现在本题之后
          %p
            %span 上传要插入的题目
            = file_field_tag "file"
        .modal-footer
          %a.btn.btn-default{href: "#", data: {dismiss: "modal"}, "aria-hidden" => "true"} 取消
          = submit_tag "完成", :class => 'btn-primary btn'

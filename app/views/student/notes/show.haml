- content_for :head do
  = javascript_include_tag "pages/student/notes/show-bundle"
  = stylesheet_link_tag "pages/student/notes/show-bundle", :media => "all"
  :javascript
    window.subject = "#{@note.question.homework.subject.to_s}"
    window.summary = "#{@note.summary}"
    window.topics = "#{@note.topics.map { |e| e.name } .join(',')}"

.container
  .lib-content
    #current-question-div.col-lg-9
      .question-div
        .question-content-div
          .question-content
            = render :partial => "partials/question_content", locals: { content: @note.content }
          - if @note.type == "choice"
            .question-items
              - @note.items.each_with_index do |item, index|
                %p.item-is-not-answer
                  %label= d2c(index) + ". "
                  %span.item-content= item.render_question.html_safe
                  .for-edit.hide= item.render_question_for_edit.html_safe
          .question-answer.hide
            - if @note.type == "choice" && @note.answer.present?
              %strong.answer-label= "解答: #{d2c(@note.answer)}"
            - else
              %strong.answer-label= "解答:"
            .question-answer-content
              = render :partial => "partials/question_content", locals: { content: @note.answer_content }
          %a#toggle_answer{href: "javascript:void(0)", "aria-hidden" => "true", data: {"question-id" => @note.id.to_s}} 显示答案
        .clear-both
    .col-lg-3
      .note-type-box
        %span 错误类型：
        = select_tag "note_type", options_for_select(note_type, @note.note_type), class: "form-control input-md", id: "note_type-select"
      .topic-box
        %input.form-control#tags{type: "text", value: ""}/
      .summary-box
        %textarea.summary.form-control{placeholder: "错误总结"}
      %a#update_note.btn.btn-primary.btn-md{href: "#", "aria-hidden" => "true", data: {"note-id" => @note.id.to_s}} 更新
      .clear-both
    #similar-questions-div
